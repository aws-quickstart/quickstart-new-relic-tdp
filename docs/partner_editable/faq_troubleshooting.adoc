// Add any tips or answers to anticipated questions. This could include the following troubleshooting information. If you don’t have any other Q&A to add, change “FAQ” to “Troubleshooting.”

== FAQ

*Q.* I encountered a *CREATE_FAILED* error when I launched the Quick Start.

*A.* If AWS CloudFormation fails to create the stack, relaunch the template with *Rollback on failure* set to *Disabled*. This setting is under *Advanced* in the AWS CloudFormation console on the *Configure stack options* page. With this setting, the stack’s state is retained and the instance is left running, so you can troubleshoot the issue. (For Windows, look at the log files in `%ProgramFiles%\Amazon\EC2ConfigService` and `C:\cfn\log`.)
// If you’re deploying on Linux instances, provide the location for log files on Linux, or omit this sentence.

WARNING: When you set *Rollback on failure* to *Disabled*, you continue to incur AWS charges for this stack. Delete the stack when you finish troubleshooting.

For more information, see https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html[Troubleshooting AWS CloudFormation^].

*Q.* I encountered a size limitation error when I deployed the AWS CloudFormation templates.

*A.* Launch the Quick Start templates from the links in this guide or from another S3 bucket. If you deploy the templates from a local copy on your computer or from a location other than an S3 bucket, you might encounter template size limitations. For more information, see http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cloudformation-limits.html[AWS CloudFormation quotas^].


== Troubleshooting

*Q.* I can't connect to the instance I launched for testing, using Session Manager.

*A.* Ensure that your instance is associated with an instance profile that is configured for use with the AWS Systems Manager service and that SSM agent is installed on the instance. For more information, see https://docs.aws.amazon.com/systems-manager/latest/userguide/setup-instance-profile.html[Create an IAM instance profile for Systems Manager]. Ensure that the security group associated with your instance allows incoming SSH traffic from your IP address. After you launch an instance, it can take a few minutes for the instance to be ready so that you can connect to it. Check that your instance has passed its status checks. You can view this information in the *Status check* column on the *Instances* page.
If none of the above resolve the issue, see https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-troubleshooting.html[Troubleshooting Session Manager]. For general connection issues, see https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html[Troubleshooting connecting to your instance].

*Q.* The New Relic Infrastructure agent is installed but no data shows up in New Relic.

*A.* Ensure that the agent configuration file, https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent#config-file[newrelic-infra.yml] contains a valid `license_key` and that matches with your https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/new-relic-license-key[New Relic license key]. Verify that no firewalls or proxies are blocking outbound connections from the agent process to the https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/networks#infrastructure[Infrastructure domains and ports]. For accounts installing the infrastructure agent for the first time, the latency for data appearing in the Infrastructure monitoring UI can be tens of minutes. If you've verified the installation and no obvious error conditions appear in the verbose logs, monitor the Infrastructure UI for a longer period before contacting https://support.newrelic.com/[New Relic Support] for assistance.
For more details, see https://docs.newrelic.com/docs/infrastructure/infrastructure-troubleshooting/troubleshoot-infrastructure/no-data-appears-infrastructure[No data appears (Infrastructure)] and https://docs.newrelic.com/docs/infrastructure/install-infrastructure-agent/manage-your-agent/troubleshoot-running-infrastructure-agent[Troubleshoot a running infrastructure agent].

*Q* The New Relic Infrastructure agent is not running and there are no logs.

*A* Make sure you tagged the instance appropriately, with `NR-Infrastructure` set to `Install`. Verify the AMI's OS and architecture is supported by New Relic Infrastructure agent. If this does not seem to be a problem, investigate the SSM Automation that the solution runs in response to the EC2 instance starting up, and see if it ran into any errors.

SSM Automation reports detailed status information about the various statuses an automation action or step goes through when you run an automation, and for the overall automation. Navigate to https://console.aws.amazon.com/systems-manager/[Systems Manager] console. Make sure you select the same region where you launched your instance. In the navigation pane, choose *Automation*. While you are in the *Executions* tab, look for the document with name `NR-EC2InfraAgentSSMAutomationDoc` and notice the *Status* next to it. If there is an error, check the message for possible root cause and address or report the error accordingly. In case you see no meaningful error message, try https://docs.aws.amazon.com/systems-manager/latest/userguide/automation-working-executing-manually.html[Running the automation manually].

If the automation seems to have run with no errors, See
https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/troubleshooting/agent-not-starting-there-are-no-logs[Troubleshoot no logs] and https://docs.newrelic.com/docs/infrastructure/infrastructure-troubleshooting/troubleshoot-logs/generate-logs-troubleshooting-infrastructure[Generate logs for troubleshooting the infrastructure agent].
